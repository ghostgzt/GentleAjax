<script type="text/javascript">
var dialog_title="test";
var dialog_content="test123";
var dialog_style="top:100px;";

(function(){function init(){document.writeln("<div id=\"dlgTest\"class=\"dialog\"style=\"left:0;top:0;min-width:250px;min-height:250px;position:absolute;background-color:#ccc;-webkit-box-shadow:1px 1px 3px#292929;-moz-box-shadow:1px 1px 3px#292929;box-shadow:1px 1px 3px#292929;margin:10px;"+dialog_style+"\"><div oncontextmenu=\"return false\"class=\"dialog-title\"style=\"color:#fff;background-color:#404040;font-size:12pt;font-weight:bold;padding:4px 6px;cursor:move;\">"+dialog_title+"<a title=\"关闭\"style=\"color:white\"href=\"javascript:void(0);\"onclick=\"dlgTest.style.display='none';\"><span style=\"float:right;right:0\">×</span></a></div><div class=\"dialog-content\">"+dialog_content+"</div></div>");}var Dragging=function(validateHandler){var draggingObj=null;var diffX=0;var diffY=0;function mouseHandler(e){switch(e.type){case'mousedown':draggingObj=validateHandler(e);if(draggingObj!=null){diffX=e.clientX-draggingObj.offsetLeft;diffY=e.clientY-draggingObj.offsetTop;}break;case'mousemove':if(draggingObj){draggingObj.style.left=(e.clientX-diffX)+'px';draggingObj.style.top=(e.clientY-diffY)+'px';}break;case'mouseup':draggingObj=null;diffX=0;diffY=0;break;}};return{enable:function(){document.addEventListener('mousedown',mouseHandler);document.addEventListener('mousemove',mouseHandler);document.addEventListener('mouseup',mouseHandler);},disable:function(){document.removeEventListener('mousedown',mouseHandler);document.removeEventListener('mousemove',mouseHandler);document.removeEventListener('mouseup',mouseHandler);}}}function getDraggingDialog(e){var target=e.target;while(target&&target.className.indexOf('dialog-title')==-1){target=target.offsetParent;}if(target!=null){return target.offsetParent;}else{return null;}}Dragging(getDraggingDialog).enable();init();})();

</script>
